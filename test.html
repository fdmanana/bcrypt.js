<html>
    <head>
        <script src="bcrypt.js" type="text/javascript"></script>
        <title>bcrypt test</title>

        <script type="text/javascript">
            function runTests() {
                var result = false,
                    errors = false;

                document.getElementById("status").innerHTML = "Running tests... Please wait.";
                document.getElementById("status").style.color = "black";

                try {
                    result = bcrypt.runTests();
                } catch(x) {
                    errors = true;
                    if (typeof x.error === "string") {
                        document.getElementById("status").innerHTML = x.error;
                        document.getElementById("status").style.color = "red";
                    } else {
                        document.getElementById("status").innerHTML = "Unknown error while running the tests.";
                        document.getElementById("status").style.color = "red";
                    }
                }

                if ((result !== true) && (errors === false)) {
                    document.getElementById("status").innerHTML = "Unknown error while running the tests.";
                    document.getElementById("status").style.color = "red";
                } else if (result === true) {
                    document.getElementById("status").innerHTML = "All tests passed";
                    document.getElementById("status").style.color = "green";
                }
            }
        </script>
    </head>

    <body onload="runTests() && true">
        <h1 id="status"></h1>
    </body>
</html>
